# Example Checkwise Configuration
# This file demonstrates proper validation and error handling

checklists:
  # Frontend changes - comprehensive validation
  - when: 
      - "src/**/*.{tsx,jsx,vue}"
      - "components/**/*.{tsx,jsx,vue}"
      - "styles/**/*.{css,scss,sass}"
    require:
  - "Screenshot before/after attached"
  - "Accessibility tests performed (ARIA, contrast)"
  - "Tested on mobile and desktop"
  - "Issue/ticket linked in the description"

  # Backend API changes
  - when:
      - "api/**/*.ts"
      - "src/routes/**/*.ts"
      - "**/*api*.ts"
    require:
  - "API documentation updated"
  - "Backward compatibility verified"
  - "Rate limiting considered"
  - "Load tests performed if necessary"

  # Database migrations
  - when:
      - "db/migrations/**"
      - "prisma/migrations/**"
      - "**/*.sql"
    require:
  - "Rollback plan documented"
  - "Backfill/cleanup planned if necessary"
  - "Tested on staging dataset"
  - "DBA review requested (@db-team)"

  # Infrastructure changes
  - when:
      - "infra/**/*.tf"
      - "terraform/**"
      - "*.tf"
      - "k8s/**/*.yaml"
      - "docker/**"
    require:
  - "`terraform plan` pasted in artifacts"
  - "Estimated cost impact"
  - "Infra rollback plan defined"
  - "DevOps review approved (@devops-team)"

  # Security-sensitive areas
  - when:
      - "auth/**"
      - "security/**"
      - "**/*auth*.ts"
      - "middleware/security/**"
    require:
  - "Security review requested (@security-team)"
  - "Penetration tests performed"
  - "Audit logging implemented"
  - "Compliance verified"

# Advanced options for fine-tuned control
options:
  # Only apply to feature branches
  branch_pattern: "feature/*"
  
  # Filter by PR labels
  label_filter: 
    - "enhancement"
    - "feature"
    - "bugfix"
  
  # Custom header for the generated comment
  comment_header: "Team Checklist Review"
