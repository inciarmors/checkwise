# Example Checkwise Configuration
# This file demonstrates proper validation and error handling

checklists:
  # Frontend changes - comprehensive validation
  - when: 
      - "src/**/*.{tsx,jsx,vue}"
      - "components/**/*.{tsx,jsx,vue}"
      - "styles/**/*.{css,scss,sass}"
    require:
      - "🖼️ Screenshot prima/dopo allegato"
      - "♿ Test di accessibility eseguiti (ARIA, contrast)"
      - "📱 Testato su mobile e desktop"
      - "🔗 Issue/ticket linkato nella descrizione"

  # Backend API changes
  - when:
      - "api/**/*.ts"
      - "src/routes/**/*.ts"
      - "**/*api*.ts"
    require:
      - "📚 Documentazione API aggiornata"
      - "🔄 Backward compatibility verificata"
      - "⚡ Rate limiting considerato"
      - "🧪 Test di carico eseguiti se necessario"

  # Database migrations
  - when:
      - "db/migrations/**"
      - "prisma/migrations/**"
      - "**/*.sql"
    require:
      - "📋 Piano di rollback documentato"
      - "🔄 Backfill/cleanup pianificato se necessario"
      - "🧪 Testato su dataset di staging"
      - "👥 Review DBA richiesta (@db-team)"

  # Infrastructure changes
  - when:
      - "infra/**/*.tf"
      - "terraform/**"
      - "*.tf"
      - "k8s/**/*.yaml"
      - "docker/**"
    require:
      - "📊 `terraform plan` incollato negli artifacts"
      - "💰 Impatto sui costi stimato"
      - "🔙 Plan di rollback infra definito"
      - "👥 Review DevOps approvata (@devops-team)"

  # Security-sensitive areas
  - when:
      - "auth/**"
      - "security/**"
      - "**/*auth*.ts"
      - "middleware/security/**"
    require:
      - "🔒 Security review richiesta (@security-team)"
      - "🔍 Test di penetrazione eseguiti"
      - "📝 Logging di audit implementato"
      - "✅ Compliance verificata"

# Advanced options for fine-tuned control
options:
  # Only apply to feature branches
  branch_pattern: "feature/*"
  
  # Filter by PR labels
  label_filter: 
    - "enhancement"
    - "feature"
    - "bugfix"
  
  # Custom header for the generated comment
  comment_header: "🚀 **Team Checklist Review**"
